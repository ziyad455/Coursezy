/* ============================================
   Chatify - Tailwind CSS Responsive Styles
   Mobile-First Responsive Design System
   ============================================ */

/* Custom CSS Variables for Consistent Theming */
:root {
  --chatify-sidebar-width: 320px;
  --chatify-header-height: 64px;
  --chatify-message-max-width: 70%;
  --chatify-animation-duration: 300ms;
  --chatify-border-radius: 1rem;
  --chatify-spacing-unit: 1rem;
}

/* ============================================
   Base Responsive Layout 
   ============================================ */

/* Fluid Typography System */
html {
  font-size: clamp(14px, 2.5vw, 16px);
}

/* Main Messenger Container - Responsive Grid */
.messenger {
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: auto 1fr auto;
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height for mobile */
  position: relative;
  overflow: hidden;
}

/* Tablet and Desktop Layout */
@media (min-width: 768px) {
  .messenger {
    grid-template-columns: minmax(280px, 1fr) 2fr;
    grid-template-rows: 1fr;
  }
}

@media (min-width: 1024px) {
  .messenger {
    grid-template-columns: minmax(320px, 1fr) 2.5fr;
  }
}

@media (min-width: 1280px) {
  .messenger {
    grid-template-columns: minmax(360px, 25%) 1fr minmax(280px, 20%);
  }
}

/* ============================================
   Sidebar Responsiveness
   ============================================ */

.messenger-listView {
  @apply transform transition-all duration-300 ease-in-out;
  width: 100%;
  max-width: 100%;
  z-index: 40;
}

/* Mobile Sidebar Overlay */
@media (max-width: 767px) {
  .messenger-listView {
    @apply fixed inset-y-0 left-0 w-full max-w-sm bg-white dark:bg-gray-800 shadow-2xl;
    transform: translateX(-100%);
  }
  
  .messenger-listView.active {
    transform: translateX(0);
  }
  
  /* Overlay backdrop for mobile */
  .messenger-listView::before {
    content: '';
    @apply fixed inset-0 bg-black bg-opacity-50 -z-10 opacity-0 pointer-events-none transition-opacity duration-300;
  }
  
  .messenger-listView.active::before {
    @apply opacity-100 pointer-events-auto;
  }
}

/* ============================================
   Header Responsiveness
   ============================================ */

.m-header {
  @apply sticky top-0 z-20 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700;
  @apply px-3 py-2 sm:px-4 sm:py-3 md:px-6 md:py-4;
  backdrop-filter: blur(10px);
  background-color: rgba(255, 255, 255, 0.95);
}

.dark .m-header {
  background-color: rgba(31, 41, 55, 0.95);
}

/* Search Input Responsive */
.messenger-search {
  @apply w-full px-3 py-2 sm:px-4 sm:py-2.5;
  @apply text-sm sm:text-base;
  @apply rounded-lg sm:rounded-xl;
  @apply bg-gray-100 dark:bg-gray-700;
  @apply focus:ring-2 focus:ring-blue-500 focus:outline-none;
  @apply transition-all duration-200;
}

/* ============================================
   Message Cards - Responsive & Touch-Friendly
   ============================================ */

.message-card {
  @apply flex gap-2 sm:gap-3 mb-3 sm:mb-4;
  @apply px-3 sm:px-4 md:px-6;
  @apply transition-all duration-200;
}

.message-card-content {
  max-width: 85%;
}

@media (min-width: 640px) {
  .message-card-content {
    max-width: 75%;
  }
}

@media (min-width: 1024px) {
  .message-card-content {
    max-width: 60%;
  }
}

/* Message Bubbles */
.message {
  @apply rounded-2xl px-3 py-2 sm:px-4 sm:py-3;
  @apply text-sm sm:text-base;
  @apply shadow-sm hover:shadow-md;
  @apply transition-all duration-200;
  @apply break-words;
  min-height: 44px; /* Touch target size */
  display: inline-block;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Touch-friendly tap targets */
@media (hover: none) and (pointer: coarse) {
  .message {
    min-height: 48px;
    @apply px-4 py-3;
  }
}

/* ============================================
   Contact List Items - Responsive
   ============================================ */

.messenger-list-item {
  @apply w-full cursor-pointer;
  @apply transition-all duration-200;
  @apply hover:bg-gray-50 dark:hover:bg-gray-700;
  @apply active:scale-98;
  min-height: 64px; /* Touch target */
}

.messenger-list-item td {
  @apply p-2 sm:p-3 md:p-4;
}

/* Avatar Responsive Sizes */
.avatar {
  @apply rounded-full overflow-hidden bg-cover bg-center;
  @apply transition-transform duration-200;
  @apply hover:scale-105;
}

.av-s { 
  @apply w-8 h-8 sm:w-10 sm:h-10;
}

.av-m { 
  @apply w-10 h-10 sm:w-12 sm:h-12;
}

.av-l { 
  @apply w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24;
}

/* ============================================
   Send Form - Responsive Input Area
   ============================================ */

.messenger-sendCard {
  @apply sticky bottom-0 bg-white dark:bg-gray-800;
  @apply border-t border-gray-200 dark:border-gray-700;
  @apply p-2 sm:p-3 md:p-4;
  @apply shadow-lg;
}

.messenger-sendCard form {
  @apply flex items-end gap-2 sm:gap-3;
}

.m-send {
  @apply flex-1 px-3 py-2 sm:px-4 sm:py-3;
  @apply text-sm sm:text-base;
  @apply bg-gray-100 dark:bg-gray-700;
  @apply rounded-xl sm:rounded-2xl;
  @apply focus:ring-2 focus:ring-blue-500 focus:outline-none;
  @apply transition-all duration-200;
  min-height: 44px;
  max-height: 120px;
  resize: none;
}

/* Send Button */
.send-button {
  @apply p-2.5 sm:p-3 md:p-3.5;
  @apply rounded-xl sm:rounded-2xl;
  @apply bg-blue-600 hover:bg-blue-700;
  @apply text-white;
  @apply transition-all duration-200;
  @apply hover:scale-105 active:scale-95;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
  min-width: 44px;
  min-height: 44px;
}

/* ============================================
   Modals - Responsive & Accessible
   ============================================ */

.app-modal {
  @apply fixed inset-0 z-50;
  @apply bg-black bg-opacity-50;
  @apply flex items-center justify-center;
  @apply p-4;
  backdrop-filter: blur(4px);
}

.app-modal-card {
  @apply bg-white dark:bg-gray-800;
  @apply rounded-xl sm:rounded-2xl;
  @apply shadow-2xl;
  @apply w-full max-w-sm sm:max-w-md md:max-w-lg;
  @apply p-4 sm:p-6 md:p-8;
  @apply transform transition-all duration-300;
  @apply scale-95 opacity-0;
}

.app-modal-card.active {
  @apply scale-100 opacity-100;
}

/* Modal Headers */
.app-modal-header {
  @apply text-lg sm:text-xl md:text-2xl;
  @apply font-bold text-gray-900 dark:text-white;
  @apply mb-3 sm:mb-4;
}

.app-modal-body {
  @apply text-sm sm:text-base;
  @apply text-gray-600 dark:text-gray-300;
  @apply mb-4 sm:mb-6;
}

.app-modal-footer {
  @apply flex gap-2 sm:gap-3 justify-end;
}

/* ============================================
   Scrollbars - Custom & Responsive
   ============================================ */

.app-scroll {
  scrollbar-width: thin;
  scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
}

.app-scroll::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.app-scroll::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.app-scroll::-webkit-scrollbar-thumb {
  @apply bg-gray-300 dark:bg-gray-600 rounded-full;
  @apply hover:bg-gray-400 dark:hover:bg-gray-500;
}

/* Hide scrollbar on mobile for cleaner look */
@media (max-width: 640px) {
  .app-scroll::-webkit-scrollbar {
    width: 0px;
    height: 0px;
  }
  
  .app-scroll {
    scrollbar-width: none;
  }
}

/* ============================================
   Animations & Transitions
   ============================================ */

/* Smooth fade-in animation */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message-card {
  animation: fadeIn 0.3s ease-out;
}

/* Typing indicator animation */
@keyframes bounce {
  0%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
}

.typing-dots .dot {
  animation: bounce 1.4s infinite;
}

.typing-dots .dot:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-dots .dot:nth-child(3) {
  animation-delay: 0.4s;
}

/* ============================================
   Loading States
   ============================================ */

.loading-skeleton {
  @apply animate-pulse bg-gray-200 dark:bg-gray-700 rounded;
}

/* ============================================
   Touch & Hover Interactions
   ============================================ */

/* Improved touch targets for mobile */
@media (hover: none) and (pointer: coarse) {
  button, 
  a, 
  .clickable {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Remove hover effects on touch devices */
  .hover\:scale-105:hover {
    transform: none;
  }
  
  /* Add tap highlight */
  button, 
  a, 
  .clickable {
    -webkit-tap-highlight-color: rgba(59, 130, 246, 0.1);
  }
}

/* ============================================
   Accessibility Improvements
   ============================================ */

/* Focus visible styles */
*:focus-visible {
  @apply outline-none ring-2 ring-blue-500 ring-offset-2;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .message {
    @apply border-2 border-current;
  }
  
  .messenger-list-item {
    @apply border-b border-current;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================
   Dark Mode Enhancements
   ============================================ */

.dark {
  color-scheme: dark;
}

.dark .message-card.mc-sender .message {
  @apply bg-blue-600 text-white;
}

.dark .message-card:not(.mc-sender) .message {
  @apply bg-gray-700 text-gray-100;
}

/* ============================================
   Utility Classes
   ============================================ */

/* Container widths for different screens */
.container-responsive {
  @apply w-full mx-auto px-4;
  max-width: min(100%, 1440px);
}

/* Responsive spacing utilities */
.space-responsive {
  @apply space-y-2 sm:space-y-3 md:space-y-4;
}

/* Responsive text utilities */
.text-responsive {
  @apply text-sm sm:text-base md:text-lg;
}

/* Hide on mobile, show on desktop */
.desktop-only {
  @apply hidden md:block;
}

/* Show on mobile, hide on desktop */
.mobile-only {
  @apply block md:hidden;
}

/* ============================================
   Performance Optimizations
   ============================================ */

/* Hardware acceleration for smooth animations */
.messenger-listView,
.message-card,
.modal {
  will-change: transform;
  transform: translateZ(0);
}

/* Optimize image rendering */
img {
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
}

/* ============================================
   Print Styles
   ============================================ */

@media print {
  .messenger-listView,
  .messenger-sendCard,
  .m-header {
    display: none !important;
  }
  
  .messenger-messagingView {
    width: 100% !important;
  }
  
  .message-card {
    page-break-inside: avoid;
  }
}
